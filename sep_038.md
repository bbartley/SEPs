SEP 038 -- Merging ComponentDefinition and ModuleDefinition through Inheritance Pattern
===================================

SEP                     | 038
----------------------|--------------
**Title**                | Merging ComponentDefinition and ModuleDefinition through Inheritance Pattern
**Authors**           | Bryan Bartley (<bartleyba@sbolstandard.org>)
**Editor**            |  
**Type**               | Data Model
**SBOL Version** | 2.4
**Replaces**        | 
**Status**             | Draft
**Created**          | 28-August-2019
**Last modified**  | 

## Abstract

This proposal will make `ModuleDefinition` a subclass of `ComponentDefinition`, effectively merging `ModuleDefinition` into `ComponentDefinition`. This includes a migration path for deprecating the extraneous and redundant properties of `ModuleDefinition`. This proposal also introduces new properties `inputs` and `outputs` for `ModuleDefinition`. These properties also make the interface of a module more explicit and intuitive, thus reduces the learning curve of SBOL.

## Motivation <a name='motivation'></a>

The goal here is in keeping with the spirit of SEP035, and all of the following still applies:

> Similarly, the boundary between structural and functional composition is often unclear, and can cause miscategorizations that are problematic to correct.  For example, we are using `ModuleDefinition` to represent mixtures (e.g., growth media) while `ComponentDefinition` is used to represent covalently bonded structures (e.g., DNA, pure chemicals).

> In short, there doesn't seem to be any value to separating structure and function, so we are going to let one object contain both types of information.

Where this SEP differs is that it allows us to keep the concept of a `ModuleDefinition` and modularity in the data model. Modularity is widely recognized as one of the fundamental principles of synthetic biology and engineering. The names we choose for classes in the data model can be important, especially when trying to explain SBOL to new users, journal reviewers, and the larger scientific community.  We should keep this concept explicit in the data model.

A natural language description of this conceptualization is as follows:

A module is a component of a system that has a defined interface of inputs and outputs.

## Specification <a name='specification'></a>

![Merging ComponentDefinition and ModuleDefinition through Inheritance Pattern](images/sep_038_merged_cdef_mdef.png "Merging ComponentDefinition and ModuleDefinition through Inheritance Pattern")

**Figure 1:** Diagram of `ModuleDefinition` class. New properties are highlighted in red. 

### Adjustments to Component

- The `definition` property of `Component` can now reference either a `ComponentDefinition` or `ModuleDefinition`.

### Adjustments to ModuleDefinition

- The `modules` property is deprecated. 
- The `functionalComponents` property is deprecated.
- New properties `inputs` and `outputs` are introduced to define the interface of a module.  These properties reference the interface `Components` of the module directly, thus eliminating need for a `direction` field or a `FunctionalComponent`. It also allows us to eliminate the SBOL-specific identifiers we currently use for the `direction` type...these kind of ontologies are an anti-pattern that should be minimized when possible.

Additional validation rules to add are:

- The `inputs` and `outputs` of a `ModuleDefinition` must be `Components` contained within the component hierarchy of the parent `ModuleDefinition`.
- During the 2.4 transition stage to full deprecation, we may need validation rules to enforce consistency between the `direction` property of `FunctionComponent` and the `inputs` and `outputs` property of `ModuleDefinition`.  See discussion below in [Backwards Compatibility](#compatibility) 
- Like SEP035, a weak REQUIRED condition for `ModuleDefinition`: there must only be a `sequence` or `sequenceAnnotaiton` if all `components` can be linearized onto a single sequence.

### Adjustments to Component and Participation

For `Participation` objects, the `participant` property is generalized to allow `ComponentInstance` objects, not just `FunctionalComponent`.

## Backwards Compatibility <a name='compatibility'></a>

Backwards compatibility can be temporarily maintained by retaining all of `ModuleDefinitions` current properties, while going ahead and implementing the inheritance relationship with `ComponentDefinition`. Adding new `inputs` and `outputs` fields to `ModuleDefinition` will not prevent continued use of existing `ModuleDefinitions`. During this time we might need some validation rules to ensure consistency of `FunctionalComponent::direction` with `ModuleDefinition::inputs` or `ModuleDefinition::outputs`. 

In SBOL 3, `FunctionalComponent`, and `Module` will all be deleted, which will obviously not be backward compatible, while `ModuleDefinition` will be retained. Once `Modules` and `FunctionalComponents` are fully deprecated, there is still a straightforward conversion from 2.4 to 3.0 `ModuleDefinition`.

## Discussion <a name='discussion'></a>


## Competing SEPs <a name='competing_seps'></a>

This proposal is in the same spirit as SEP035, though the approach to implementation is different. It accomplishes much of the same as SEP035, because it adds Interactions and Models to ComponentDefinition, thus integrating the structural and functional hierarchies. 

References <a name='references'></a>
----------------

Copyright <a name='copyright'></a>
-------------

<p xmlns:dct="http://purl.org/dc/terms/" xmlns:vcard="http://www.w3.org/2001/vcard-rdf/3.0#">
  <a rel="license"
     href="http://creativecommons.org/publicdomain/zero/1.0/">
    <img src="http://i.creativecommons.org/p/zero/1.0/88x31.png" style="border-style: none;" alt="CC0" />
  </a>
  <br />
  To the extent possible under law,
  <a rel="dct:publisher"
     href="sbolstandard.org">
    <span property="dct:title">SBOL developers</span></a>
  has waived all copyright and related or neighboring rights to
  <span property="dct:title">SEP 038</span>.
This work is published from:
<span property="vcard:Country" datatype="dct:ISO3166"
      content="US" about="sbolstandard.org">
  United States</span>.
</p>


